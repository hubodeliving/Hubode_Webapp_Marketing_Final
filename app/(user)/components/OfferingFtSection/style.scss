// File: components/TextImageSection/TextImageSection.scss

// Assume global variables like $primary-green, $black, $grey-text, $cloud-grey are defined
// For example:
$primary-green: #1A3B34;
$black: #000;
$grey-text: #585858;
$cloud-grey: #E3E5E6; // Example
// $container-padding-desktop: 2rem;
// $container-padding-mobile: 1rem;

.text-image-section-main {
    padding: 2rem 0; // Example vertical padding, adjust or remove
}

.text-image-section-container.container {
    display: flex;
    align-items: center;
    gap: 3rem;
    width: 100%;

    .image-content-wrapper, // Using this as a common class name for both sides
    .text-content-wrapper {
        flex-basis: 50%;
        flex-shrink: 1;
    }

    .image-wrapper { // Specific to the image side
        order: 1; // Image first by default
        border-radius: 1.25rem;
        overflow: hidden;
        // background-color: $cloud-grey; // Optional placeholder

        .section-image { // Class for the Next/Image component
            display: block;
            width: 100%;
            height: auto; // Important for Next/Image to maintain aspect ratio
            object-fit: cover;
            border-radius: inherit; // Ensures Next/Image respects parent's border-radius
        }
    }

    .text-wrapper { // Specific to the text side
        order: 2; // Text second by default
        display: flex;
        flex-direction: column;
        justify-content: center;
        gap: 0.5rem;

        h2 {
            color: $primary-green;
            font-family: Aeonik, sans-serif;
            font-size: 2.75rem;
            font-style: normal;
            font-weight: 700;
            line-height: 1.2;
            margin: 0;
        }

        p.subtext {
            font-family: Aeonik, sans-serif;
            font-size: 1.125rem;
            font-style: normal;
            font-weight: 400;
            line-height: 1.6;
            margin: 0;
        }

        p.subtext-main {
            color: $black;
            margin-bottom: 0.8rem;
        }

        p.subtext-secondary {
            color: $grey-text;
        }
    }

    // --- Reversed Layout ---
    &.layout-reversed {
        .image-wrapper {
            order: 2;
        }
        .text-wrapper {
            order: 1;
        }
    }


    // --- Responsive Adjustments ---
    @media (max-width: 992px) { // Tablet
        gap: 2rem;

        .text-wrapper {
            h2 { font-size: 2.4rem; }
            p.subtext { font-size: 1.05rem; }
        }
    }

    @media (max-width: 767px) { // Mobile
        flex-direction: column;
        gap: 2.5rem; // Increase vertical gap slightly on mobile

        .image-content-wrapper, // Common class
        .text-content-wrapper {
            flex-basis: 100%;
            order: 0 !important; // Reset order, natural flow (image first then text)
        }

        p.subtext-main{
            margin-bottom: 0.4rem!important;
        }

        // If layout is reversed, text should appear first then image
        &.layout-reversed {
            .image-wrapper { // Specific class
                order: 2 !important;
            }
            .text-wrapper { // Specific class
                order: 1 !important;
            }
        }

        .text-wrapper {
            align-items: center;
            text-align: left;
            h2 { font-size: 2.1rem; }
            p.subtext { font-size: 1rem; }
        }

        // --- >>> CRITICAL MOBILE IMAGE STYLING <<< ---
        .image-wrapper {
            width: 100%; // Ensure the wrapper takes full available width
            max-width: 100%; // Ensure it doesn't overflow
            // For a full-width image look like "safety feels like home",
            // you might remove border-radius on mobile or adjust it.
            // border-radius: 0; // Example: Full width image without rounded corners on mobile
            // To control height/aspect ratio explicitly on mobile:
            // aspect-ratio: 16 / 9; // Or any ratio you prefer, e.g., 4/3, 3/2
            // Or a fixed height:
            // height: 300px; // Example fixed height

            .section-image {
                // Ensure Next/Image's inner img tag behaves correctly
                // If using fixed height/aspect-ratio on .image-wrapper,
                // ensure Next/Image with layout="responsive" or fill is used correctly.
                // The `style={{ width: '100%', height: 'auto' }}` on Next/Image helps here.
            }
        }
        // --- >>> END CRITICAL MOBILE IMAGE STYLING <<< ---
    }

    @media (max-width: 480px) { // Smaller mobile
        .text-wrapper {
            h2 { font-size: 1.9rem; }

            p.subtext { font-size: 0.95rem;}
        }
         .image-wrapper {
            // Potentially slightly different aspect ratio or height for very small screens
            // aspect-ratio: 4/3;
         }
    }
}

//settle in section
.tof-container-main {
    .tof-container {
        // SectionTitle styles are handled by its own component/scss
        padding: 0 5%;

        // Removed the extra wrapper div styling (.tof-cards-container-main)

        .tof-cards-container {
            // width: 80%; // REMOVED - Let the outer .container handle width/centering
            display: grid;
            grid-template-columns: repeat(3, 1fr); // Default: 3 columns for desktop
            gap: 1.5em;

            .tof-card {
                position: relative;
                border-radius: 1rem;
                overflow: hidden;
                background-size: cover;
                background-position: center;
                height: 60vh; // Using fixed height
                display: flex;
                align-items: flex-end;

                &::before {
                    content: '';
                    position: absolute;
                    inset: 0;
                    background-color: rgba(0, 0, 0, 0.25);
                    z-index: 0;
                }


                .card-content-overlay {
                    position: relative;
                    width: 100%;
                    padding: 1.2em 1.5em;
                    z-index: 1;
                    background-color: rgba(255, 255, 255, 0.4);
                    backdrop-filter: blur(10px);
                    -webkit-backdrop-filter: blur(10px);

                    h5 {
                        color: $white;
                        font-family: Aeonik;
                        font-size: 1.375rem;
                        font-style: normal;
                        font-weight: 700;
                        line-height: normal;
                        margin: 0;
                        text-align: left;
                    }
                }
            }
        }

        // --- Responsiveness ---
        @media (max-width: 992px) { // Tablets
            .tof-cards-container {
                 grid-template-columns: repeat(2, 1fr); // Switch to 2 columns
                 gap: 1.2em;
                 .tof-card {
                      height: 50vh; // Optional: Adjust height for tablets
                 }
            }
        }

        @media (max-width: 767px) { // Mobile
            .tof-cards-container {
                grid-template-columns: 1fr; // Stack cards vertically (1 column)
                gap: 1.5em;
                 .tof-card {
                      height: 45vh; // Optional: Adjust height for mobile
                 }
            }
        }
    }
}